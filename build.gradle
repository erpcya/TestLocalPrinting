plugins {
    id 'java'
}

java {
	sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

repositories {
    jcenter()
}

sourceSets {
    main {
         java {
            srcDirs = ['print/src/main/java/base']
         }
    }
}

dependencies {
	compile fileTree(dir: 'dependences', include: ['*.jar'])
	compile fileTree(dir: 'lib', include: ['*.jar'])
}

// Provide convenience executables for trying out the examples.
apply plugin: 'application'

startScripts.enabled = false

task TestPrintService(type: CreateStartScripts) {
    mainClassName = 'org.spin.util.print.TestLocalPrinting'
    applicationName = 'test-print'
    defaultJvmOpts = Arrays.asList("-DPropertyFile=Adempiere.properties", "-Dorg.adempiere.server.embedded=true")
    outputDir = new File(project.buildDir, 'tmp')
    classpath = jar.outputs.files + project.configurations.runtime// + files("lib/Adempiere.jar")
}

jar {
    manifest {
        attributes('Implementation-Title': project.name,
                   'Implementation-Version': project.version)
    }
}

applicationDistribution.into('bin') {
	from(TestPrintService)
    fileMode = 0755
}